(function(t){function e(e){for(var o,a,r=e[0],c=e[1],l=e[2],h=0,d=[];h<r.length;h++)a=r[h],i[a]&&d.push(i[a][0]),i[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(d.length)d.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],o=!0,r=1;r<s.length;r++){var c=s[r];0!==i[c]&&(o=!1)}o&&(n.splice(e--,1),t=a(a.s=s[0]))}return t}var o={},i={app:0},n=[];function a(e){if(o[e])return o[e].exports;var s=o[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=o,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(s,o,function(e){return t[e]}.bind(null,o));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"018a":function(t,e,s){"use strict";var o=s("f58d"),i=s.n(o);i.a},"0261":function(t,e,s){"use strict";var o=s("2beb"),i=s.n(o);i.a},"034f":function(t,e,s){"use strict";var o=s("64a9"),i=s.n(o);i.a},"0462":function(t,e,s){"use strict";var o=s("feac"),i=s.n(o);i.a},"0689":function(t,e,s){"use strict";var o=s("b02a"),i=s.n(o);i.a},"0ca9":function(t,e,s){},1:function(t,e){},"11a5":function(t,e,s){"use strict";var o=s("55db"),i=s.n(o);i.a},"1adc":function(t,e,s){"use strict";var o=s("5634"),i=s.n(o);i.a},"1e27":function(t,e,s){"use strict";var o=s("a63e"),i=s.n(o);i.a},2111:function(t,e,s){"use strict";var o=s("c077"),i=s.n(o);i.a},2758:function(t,e,s){},"2beb":function(t,e,s){},"369a":function(t,e,s){},3804:function(t,e,s){},"38d5":function(t,e,s){"use strict";var o=s("2758"),i=s.n(o);i.a},"55db":function(t,e,s){},5634:function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("097d");var o=s("2b0e"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("nav-header"),s("tsne-map")],1)},n=[],a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header"},[s("div",{staticClass:"left-header"},[s("router-link",{attrs:{to:"/"}},[t._v("t-SNE")]),s("router-link",{attrs:{to:"/svm"}},[t._v("SVM")]),s("router-link",{attrs:{to:"/classifier"}},[t._v("Classifier")])],1),s("div",{staticClass:"right-header"})])},r=[],c={name:"NavHeader"},l=c,u=(s("8543"),s("2877")),h=Object(u["a"])(l,a,r,!1,null,"355d4022",null);h.options.__file="NavHeader.vue";var d=h.exports,g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tsne-map"},[s("div",{staticClass:"mode-header"},[s("div",{staticClass:"row"}),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",class:{active:t.showOptions},on:{click:t.toggleShowOptions}},[t._v("\n                Options\n            ")]),s("div",{staticClass:"btn",class:{active:t.loadingNodes},on:{click:t.sendData}},[t._v("\n                Update\n                "),t.loadingNodes?t._e():s("send"),t.loadingNodes?s("div",{staticClass:"loader"}):t._e()],1),s("div",{staticClass:"btn",class:{active:t.autoUpdateEmbedding},on:{click:t.toggleUpdateEmbedding}},[t._v("\n                "+t._s(t.autoUpdateEmbedding?"stop":"start")+"\n                "),t.autoUpdateEmbedding?t._e():s("play"),t.autoUpdateEmbedding?s("stop"):t._e()],1)])]),s("div",{staticClass:"row stack"},[s("div",{staticClass:"explorer"},[s("canvas",{ref:"canvas",staticClass:"canvas",attrs:{id:"canvas",tabindex:"0"}}),s("div",{staticClass:"box top right"},[s("div",{staticClass:"row"},[s("div",{staticClass:"btn",class:{active:t.target},on:{click:t.selectTarget}},[s("target")],1),s("div",{staticClass:"btn",class:{active:t.scissors},on:{click:t.selectScissors}},[s("scissors")],1),s("div",{staticClass:"btn",on:{click:t.clearGroup}},[s("x")],1)]),s("div",{staticClass:"row-end"},[s("div",{staticClass:"btn",class:{active:t.showHeatmap},on:{click:t.toggleShowHeatmap}},[s("navmap")],1),s("div",{staticClass:"btn",class:{active:t.showNavHeatmap},on:{click:t.toggleShowNavHeatmap}},[s("navmap")],1)])]),s("div",{staticClass:"box top left"},[s("div",{staticClass:"btn",attrs:{if:t.nodesTotal}},[t._v(t._s(t.nodesRecived+"/"+t.nodesTotal))])]),s("div",{staticClass:"box bottom left"},[s("div",{class:{hide:!t.showHeatmap}},[s("canvas",{staticClass:"canvas",staticStyle:{margin:"0.5rem","border-radius":"4px"},attrs:{id:"heatmap",tabindex:"0"}})]),s("div",{staticClass:"navMap",class:{hide:!t.showNavHeatmap}},[s("canvas",{staticClass:"canvas",staticStyle:{margin:"0.5rem","border-radius":"4px"},attrs:{id:"navHeatmap",tabindex:"0"}}),s("canvas",{staticStyle:{margin:"0.5rem","border-radius":"4px"},attrs:{id:"navHeatmapRect",tabindex:"0"}})])]),s("div",{staticClass:"box bottom right"},[s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeScaleDown()}}},[s("minimize")],1),s("div",{staticClass:"btn",on:{click:function(e){t.changeScaleUp()}}},[s("maximize")],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeImgSize(-1)}}},[s("img-size-down")],1),s("div",{staticClass:"btn",on:{click:function(e){t.changeImgSize(1)}}},[s("img-size-up")],1)])])]),s("div",{staticClass:"details"},[t.showOptions?s("div",{staticClass:"area"},[s("div",{staticClass:"title"},[t._v("Options")]),s("div",{staticClass:"option-title"},[t._v("Cluster")]),s("div",{staticClass:"row-btn"},[s("div",[t._v("Cluster: radius: "+t._s(t.clusterRadius))]),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeClusterRadius(-1)}}},[s("minus")],1),s("div",{staticClass:"btn",on:{click:function(e){t.changeClusterRadius(1)}}},[s("plus")],1),s("div",{staticClass:"btn",on:{click:function(e){t.superCluster()}}},[t._v("update")])])]),s("div",{staticClass:"row-btn"},[s("div",[t._v("Cluster: tile: "+t._s(t.clusterTile))]),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeClusterTile(-1)}}},[s("minus")],1),s("div",{staticClass:"btn",on:{click:function(e){t.changeClusterTile(1)}}},[s("plus")],1)])]),s("div",{staticClass:"option-title"},[t._v("Old cluster")]),s("div",{staticClass:"row-btn"},[s("div",[t._v("Cluster: "+t._s(Math.round(t.cluster)))]),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeCluster(-10)}}},[t._v("-10")]),s("div",{staticClass:"btn",on:{click:function(e){t.changeCluster(-100)}}},[t._v("-100")]),s("div",{staticClass:"btn",on:{click:function(e){t.changeCluster(100)}}},[t._v("+100")]),s("div",{staticClass:"btn",on:{click:function(e){t.changeCluster(10)}}},[t._v("+10")])])]),s("div",{staticClass:"row-btn"},[s("div",[t._v("Cluster: growth: "+t._s(t.clusterGrowth))]),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeClusterGrowth(-.01)}}},[t._v("-0.1")]),s("div",{staticClass:"btn",on:{click:function(e){t.changeClusterGrowth(.01)}}},[t._v("+0.1")])])]),s("div",{staticClass:"option-title"},[t._v("Image")]),s("div",{staticClass:"row-btn"},[s("div",[t._v("Represent: size: "+t._s(t.representImgSize))]),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeRepresentImgSize(-1)}}},[s("img-size-down")],1),s("div",{staticClass:"btn",on:{click:function(e){t.changeRepresentImgSize(1)}}},[s("img-size-up")],1)])]),s("div",{staticClass:"row-btn"},[s("div",[t._v("Alpha (base): "+t._s(t.alphaBase))]),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeAlphaBase(-10)}}},[t._v("-10")]),s("div",{staticClass:"btn",on:{click:function(e){t.changeAlphaBase(10)}}},[t._v("+10")])])]),s("div",{staticClass:"row-btn"},[s("div",[t._v("Aplha (increase): "+t._s(t.alphaIncrease))]),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeAlphaIncrease(-10)}}},[t._v("-10")]),s("div",{staticClass:"btn",on:{click:function(e){t.changeAlphaIncrease(10)}}},[t._v("+10")])])]),s("div",{staticClass:"row-btn"},[s("div",[t._v("Represent: alpha")]),s("div",{staticClass:"btn",class:{active:t.representWithAlpha},on:{click:t.toggleRepresentWithAlpha}},[t._v("\n                        "+t._s(t.representWithAlpha?"On":"Off")+"\n                    ")])]),s("div",{staticClass:"row-btn"},[s("div",[t._v("Represent: sort")]),s("div",{staticClass:"btn",class:{active:t.repsMode},on:{click:t.toogleRepsMode}},[t._v("\n                        "+t._s(0===t.repsMode?"normal":1===t.repsMode?"before":"behind")+"\n                    ")])]),s("div",{staticClass:"row-btn"},[s("div",[t._v("Neighbours: size: "+t._s(t.neighbourImgSize))]),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeNeighbourImgSize(-1)}}},[s("img-size-down")],1),s("div",{staticClass:"btn",on:{click:function(e){t.changeNeighbourImgSize(1)}}},[s("img-size-up")],1)])]),s("div",{staticClass:"option-title"},[t._v("Other")]),s("div",{staticClass:"row-btn"},[s("div",[t._v("zoomStage: "+t._s(t.zoomStage))]),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeZoomStage(-1)}}},[s("minus")],1),s("div",{staticClass:"btn",on:{click:function(e){t.changeZoomStage(1)}}},[s("plus")],1)])]),s("div",{staticClass:"option-title"},[t._v("Ranked")]),s("div",{staticClass:"row-btn"},[s("div",[t._v("Sort")]),s("div",{staticClass:"btn",class:{active:t.sorted},on:{click:t.sortNodes}},[t._v("\n                        "+t._s(t.sorted?"On":"Off")+"\n                    ")])]),s("div",{staticClass:"row-btn"},[s("div",[t._v("Size")]),s("div",{staticClass:"btn",class:{active:t.sizeRankedMode},on:{click:t.toggleSizeRankedMode}},[t._v("\n                        "+t._s(t.sizeRankedMode?"On":"Off")+"\n                    ")])]),s("div",{staticClass:"row-btn"},[s("div",[t._v("Size range: "+t._s(t.sizeRange))]),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeSizeRange(-1)}}},[s("minus")],1),s("div",{staticClass:"btn",on:{click:function(e){t.changeSizeRange(1)}}},[s("plus")],1)])]),s("div",{staticClass:"row-btn"},[s("div",[t._v("Border")]),s("div",{staticClass:"btn",class:{active:t.boarderRankedMode},on:{click:t.toggleBoarderRankedMode}},[t._v("\n                        "+t._s(t.boarderRankedMode?"On":"Off")+"\n                    ")])]),s("div",{staticClass:"row-btn"},t._l(t.gradient,function(e,o){return s("div",{key:o,staticClass:"color",class:{activeColor:t.selectedGradient===o},style:{backgroundColor:"rgb("+e[0]+","+e[1]+","+e[2]+")"},on:{click:function(e){t.changeGradientColor(o)}}},[t._v("\n                        "+t._s(o)+"\n                    ")])}),0),s("slider-picker",{on:{input:t.changeColor},model:{value:t.colors,callback:function(e){t.colors=e},expression:"colors"}}),s("div",{staticClass:"option-title"},[t._v("Heatmap")]),s("div",{staticClass:"row-btn"},[s("div",[t._v("Radius: "+t._s(t.heatmapRadius))]),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeHeatmapRadius(-1)}}},[s("minus")],1),s("div",{staticClass:"btn",on:{click:function(e){t.changeHeatmapRadius(1)}}},[s("plus")],1)])]),s("div",{staticClass:"row-btn"},[s("div",[t._v("Blur: "+t._s(t.heatmapBlur))]),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeHeatmapBlur(-1)}}},[s("minus")],1),s("div",{staticClass:"btn",on:{click:function(e){t.changeHeatmapBlur(1)}}},[s("plus")],1)])])],1):t._e(),s("div",{staticClass:"area"},[s("div",{staticClass:"title"},[t._v("Save/load groups")]),this.savedGroups.length?s("div",{staticClass:"group-list"},t._l(t.savedGroups,function(e,o){return s("div",{key:o,staticClass:"group-item row-between"},[s("div",{staticClass:"btn",class:{active:e.groupId===t.activeGroup},on:{click:function(e){t.selectGroup(o)}}},[t._v("\n                            "+t._s(""+e.name)+"\n                        ")]),s("div",[t._v(t._s("#"+e.count))]),s("select",{staticClass:"btn",style:{width:"3rem",backgroundColor:"rgb("+t.groupColours[e.colorId][0]+","+t.groupColours[e.colorId][1]+","+t.groupColours[e.colorId][2]+")"},on:{change:function(e){t.changeGroupColor(e,o)}}},t._l(t.groupColours,function(t,o){return s("option",{key:o,style:{backgroundColor:"rgb("+t[0]+","+t[1]+","+t[2]+")"},attrs:{id:e.colorId},domProps:{selected:e.colorId==o,value:o}})}),0),s("div",{staticClass:"btn",class:{active:t.neighbourMode&&e.groupId===t.activeGroup},on:{click:function(e){t.handleNeighbourMode(o)}}},[s("repeat")],1),s("div",{staticClass:"btn",on:{click:function(e){t.deleteGroup(o)}}},[s("trash")],1)])}),0):t._e(),s("div",{staticClass:"row v-center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.groupName,expression:"groupName"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.groupName},on:{input:function(e){e.target.composing||(t.groupName=e.target.value)}}}),s("div",{staticClass:"btn",on:{click:t.saveGroup}},[t._v("save group")])])]),t.neighbourMode?s("neighbours",{attrs:{getStore:t.getStore,changeNeighboursThreshold:t.changeNeighboursThreshold,neighboursThreshold:t.neighboursThreshold}}):t._e(),s("router-view",{attrs:{nodes:t.cuttedNodes,labels:t.labels,node:t.clickedNode,getNode:t.getNode,changeActiveNode:t.changeActiveNode,getStore:t.getStore,dataset:t.dataset,handleChangeDataset:t.handleChangeDataset}}),t.activeNode?s("div",{staticClass:"info-box"},[t.activeNode.hasImage?s("img",{staticClass:"active-img",attrs:{src:t.activeNode.image.src}}):t._e(),s("div",[t._v("Name: "+t._s(t.activeNode.name))]),s("div",[t._v("Label: "+t._s(t.activeNode.label))]),s("div",[t._v("Labels: "+t._s(t.activeNode.labels))]),s("div",[t._v("Links #: "+t._s(Object.keys(t.activeNode.links).length))])]):t._e(),s("logs",{attrs:{getStore:t.getStore}})],1)])])},v=[],p=s("a4bb"),f=s.n(p),m=s("f499"),b=s.n(m),w=(s("96cf"),s("3b8d")),C=s("db0c"),x=s.n(C),y=s("8055"),_=s.n(y),k=s("6ebf"),N=s.n(k),S=s("c345"),M=(s("6aa2"),s("ac6a"),s("7f7f"),s("d225")),G=function t(e){var s=this;Object(M["a"])(this,t),this.name=e.name,this.links=e.links,this.index=e.index,this.x=e.x,this.y=e.y,this.colorKey=e.colorKey,this.group=!1,this.groupId=null,this.clique=e.clique,this.cliqueLen=e.clique.length,this.cluster=e.cluster,this.isClusterd=!0,this.isNearly=!1,this.labels=e.labels,this.rank=e.rank,this.hasImage=!1,this.image=new Image,this.imageData={};try{x()(e.pics).forEach(function(t,e){s.imageData[e]=new ImageData(new Uint8ClampedArray(t.data),t.info.width,t.info.height)})}catch(o){console.error(o),console.log(this),console.log(e)}},R=(s("7514"),s("55dd"),s("6762"),s("2fdb"),s("c7c6"),s("cebc")),z=s("b0b4"),E=s("bd86"),I=s("6ff6"),D={0:[0,0,143],1:[182,0,0],2:[0,140,0],3:[195,79,255],4:[1,165,202],5:[236,157,0],6:[118,255,0],7:[89,83,84],8:[255,117,152],9:[148,0,115],10:[0,243,204],11:[72,83,255],12:[166,161,154],13:[0,67,1],14:[237,183,255],15:[138,104,0],16:[97,0,163],17:[92,0,17],18:[255,245,133],19:[0,123,105]},T=D,O=function(){function t(e,s,o,i){var n=this;Object(M["a"])(this,t),Object(E["a"])(this,"scaleTestDraw",function(){n.scaleTest&&(console.log("scaleTestDraw"),requestAnimationFrame(n.scaleTestDraw))}),this.socket=o,this.ui=i,this.explorer=e,this.ctx=e.getContext("2d"),this.width=e.width,this.height=e.height,this.hitCtx=s.getContext("2d"),this._valid=!0,this.nodes={},this.colorHash={},this.panning=!1,this.draggNode=!1,this.nodeOnMouseDown=!1,this.selectedLabel=null,this.selectedCategory=null,this._nodeUnderMouse=!1,this._scissors=!1,this.drawScissors=!1,this.scissorsStartX=0,this.scissorsStartY=0,this.scissorsEndX=0,this.scissorsEndY=0,this._cluster=100,this._clusterRadius=5,this._clusterTile=10,this.supercluster=Object(I["a"])(),this._scale=20,this._scaleFaktor=0,this._zoomStage=0,this.imgSize=0,this.representImgSize=5,this.neighbourImgSize=7,this._clusterGrowth=1.2,this.translateX=this.width/2,this.translateY=this.height/2,this.startX=null,this.startY=null,this.explorer.onmousedown=function(t){return n.handleMouseDown(t)},this.explorer.onmousemove=function(t){return n.handleMouseMove(t)},this.explorer.onmouseup=function(t){return n.handleMouseUp(t)},this.explorer.ondblclick=function(t){return n.handleDoubleClick(t)},this.explorer.onwheel=function(t){return n.zoom(t)},this.sortedNodes=[],this.sorted=!1,this.sizeRange=3,this.maxZoomLvl=20,this._moveGroupToMouse=!1,this.groupNeighbours={},this.removedGroupNeighbours={},this.groupColours=T,this.maxDrawTime=0,this.maxHitMapTime=0,this.perfLogs={draw:[],hitmap:[]},this.scaleTest=!1}return Object(z["a"])(t,[{key:"lngX",value:function(t){return t/360+.5}},{key:"latY",value:function(t){var e=Math.sin(t*Math.PI/180),s=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return s<0?0:s>1?1:s}},{key:"triggerDraw",value:function(){this.valid=!1}},{key:"doubleNodes",value:function(){var t=this,e=f()(this.nodes).length,s=2*Math.random()-1;console.log(e),x()(this.nodes).map(function(o,i){var n=e+i,a=Object(R["a"])({x:i%2?o.x-s:o.x+s,y:i%2?o.y-s:o.y+s},o);a.index=n,console.log({newNode:a,node:o,index:n}),t.addNode(a)}),console.log(this.nodes)}},{key:"createSuperCluster",value:function(){console.time("build superClusterIndex"),console.time("create geoPoints");var t=x()(this.nodes).map(function(t){return{type:"Feature",geometry:{type:"Point",coordinates:[t.x,t.y]},properties:{index:t.index}}});console.timeEnd("create geoPoints"),console.log({geoPoints:t}),this.supercluster=Object(I["a"])({radius:this.clusterRadius,maxZoom:this.maxZoomLvl,extend:this.clusterTile,log:!0}),this.supercluster.load(t),console.timeEnd("build superClusterIndex"),console.log(this.supercluster),this.triggerDraw()}},{key:"updateClustering",value:function(t){var e=this;function s(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1])}if(this.supercluster){console.time("get cluster");var o=this.zoomStage,i=this.scale,n=this.width,a=this.height,r=this.translateX,c=this.translateY,l=[-r/i,-c/i,(n-c)/i,(a-c)/i],u=this.supercluster.getClusters(l,o);console.timeEnd("get cluster"),console.time("update cluster on nodes"),console.log(u),u.forEach(function(o){var i=o.properties,n=i.index,a=i.cluster_id;if(n)e.nodes[n].isClusterd=!1;else if(a){var r=e.supercluster.getLeaves(o.id,1/0);t&&console.log(o),t&&console.log(o.geometry.coordinates);var c=null,l=1/0;r.forEach(function(i){var n=e.nodes[i.properties.index];n.isClusterd=!0,t&&console.log([n.x,n.y]),t&&console.log(i.geometry.coordinates);var a=s(i.geometry.coordinates,o.geometry.coordinates);t&&console.log(a),a<l&&(l=a,c=i.properties.index)}),t&&console.log({centroidId:c,min:l}),e.nodes[c].isClusterd=!1}}),console.timeEnd("update cluster on nodes")}}},{key:"clearGroup",value:function(){x()(this.nodes).forEach(function(t){t.group&&(t.group=!1)}),this.triggerDraw()}},{key:"deleteGroup",value:function(t){x()(this.nodes).forEach(function(e){e.groupId===t&&(e.group=!1,e.groupId=null)}),this.triggerDraw()}},{key:"loadGroupByGroupId",value:function(t){x()(this.nodes).forEach(function(e){e.group=e.groupId===t?t:null}),this.triggerDraw()}},{key:"addLabeledToGroup",value:function(t){x()(this.nodes).forEach(function(e){return e.labels.includes(t)&&(e.group=!0)}),this.triggerDraw()}},{key:"getGroupedNodeIds",value:function(){var t=[];return x()(this.nodes).forEach(function(e){return e.group?t.push(e.index):null}),t}},{key:"saveGroup",value:function(t){var e=this;f()(this.nodes).forEach(function(s){return e.nodes[s].group?e.nodes[s].groupId=t:null}),this.updateGroupCounter()}},{key:"addNodesToActiveGroup",value:function(t){var e=this;t.forEach(function(t){e.nodes[t].group=!0,e.nodes[t].groupId=e.ui.activeGroup})}},{key:"moveGroupToPosition",value:function(t,e){x()(this.nodes).forEach(function(s){s.group&&(s.x+=(t-s.x)/2,s.y+=(e-s.y)/2)}),this.triggerDraw()}},{key:"updateGroupNeighbours",value:function(t){this.groupNeighbours=t,this.removedGroupNeighbours={},this.triggerDraw()}},{key:"resetGroupNeighbours",value:function(){this.groupNeighbours={},this.removedGroupNeighbours={},this.triggerDraw()}},{key:"addNode",value:function(t){this.nodes[t.index]=t,this.colorHash["rgb(".concat(t.colorKey[0],",").concat(t.colorKey[1],",").concat(t.colorKey[2],")")]=t.index,this.triggerDraw()}},{key:"updateNodes",value:function(t){var e=this;x()(t).forEach(function(t){e.nodes[t.index].x=t.x,e.nodes[t.index].y=t.y,t.labels&&(e.nodes[t.index].labels=t.labels)}),this.triggerDraw()}},{key:"getNodes",value:function(){var t={};return x()(this.nodes).forEach(function(e){var s=e.index,o=e.x,i=e.y,n=e.name,a=e.negatives,r=e.positives,c=e.links,l=e.labels;t[s]={index:s,x:o,y:i,name:n,negatives:a,positives:r,links:c,labels:l}}),t}},{key:"getNodesSimple",value:function(){var t={};return x()(this.nodes).forEach(function(e){var s=e.index,o=e.x,i=e.y;return t[s]={index:s,x:o,y:i}}),t}},{key:"getNode",value:function(t){return this.nodes[t]}},{key:"sortNodes",value:function(){this.sorted=!this.sorted,this.sortedNodes.length||(console.time("sortNodes"),this.sortedNodes=x()(this.nodes).sort(function(t,e){return console.log(t.cliqueLen-e.cliqueLen),t.cliqueLen-e.cliqueLen}),console.timeEnd("sortNodes")),this.triggerDraw()}},{key:"sortNodesReps",value:function(t){console.log("sortNodesReps");var e=1===t?-1:1;return x()(this.nodes).sort(function(t,s){return t.isClusterd===s.isClusterd?0:t.isClusterd?e:-1*e})}},{key:"changeScaleUp",value:function(){this.scaleFaktor+=1,this.scale+=20*this.scaleFaktor,this.ui.scale=this.scale}},{key:"changeScaleDown",value:function(){this.scale-=20*this.scaleFaktor,this.scaleFaktor-=1,this.ui.scale=this.scale}},{key:"toggleScaleTest",value:function(){return this.scaleTest=!this.scaleTest,requestAnimationFrame(this.scaleTestDraw),this.scaleTest}},{key:"updateGroupCounter",value:function(){var t={};this.ui.savedGroups.forEach(function(e){return t[e.groupId]=0}),x()(this.nodes).forEach(function(e){e.groupId&&(t[e.groupId]+=1)}),this.ui.savedGroups.forEach(function(e){return e.count=t[e.groupId]})}},{key:"draw2",value:function(){var t=this,e=window.performance.now(),s=this.zoomStage,o=this.scale,i=this.width,n=this.height,a=this.translateX,r=this.translateY,c=this.representImgSize,l=new Uint8ClampedArray(i*n*4),u=new Uint8ClampedArray(i*n*4),h=this.ui,d=h.boarderRankedMode,g=h.sizeRankedMode,v=h.gradient,p=h.clusterMode,f=h.oldClusterMode,m=h.neighbourMode,b=h.representWithAlpha,w=h.repsMode,C=h.alphaBase,y=h.alphaIncrease;p&&this.updateClustering();var _=this.sorted?this.sortedNodes:p&&w?this.sortNodesReps(w):x()(this.nodes);if(_.forEach(function(e){var h=g?s+Math.floor(e.rank*t.sizeRange):s;h+=t.imgSize;var w=p&&!e.isClusterd||f&&e.cluster<t.cluster;if(m&&!e.group){var x=t.groupNeighbours[e.index];if(!(x&&x<=t.ui.neighboursThreshold))return;h+=t.neighbourImgSize}else w&&(h+=c);h<0&&(h=0),h>14&&(h=14);var _=e.imageData[h];if(!_)return console.error("no image for node: ".concat(e.id,"exists"));var k=_.width,N=_.height,S=Math.floor(e.x*o+a-k/2),M=Math.floor(e.y*o+r-N/2);if(S<i-k&&M<n-N){var G=!0;e.labels.forEach(function(e,s){e&&t.ui.labels[s]&&t.ui.labels[s].labels.forEach(function(t){t&&!t.show&&t.name===e&&(G=!1)})});var R=_.data,z=[250,208,44],E=t.ui.savedGroups.find(function(t){return t.groupId===e.groupId}),I=E&&t.groupColours[E.colorId]||[100,100,100],D=[0,127,0];if(e.groupId&&!e.group)for(var T=-2;T<=N+1;T+=1){var O=4*((M+T)*i+S);if(-2===T||-1===T||T===N+1||T===N)for(var H=-2;H<k+2;H+=1){var j=O+4*H;l[j]=I[0],l[j+1]=I[1],l[j+2]=I[2],l[j+3]=50}else{var A=O-8;l[A]=I[0],l[A+1]=I[1],l[A+2]=I[2],l[A+3]=50;var L=O-4;l[L]=I[0],l[L+1]=I[1],l[L+2]=I[2],l[L+3]=50;var P=O+4*(k+1);l[P]=I[0],l[P+1]=I[1],l[P+2]=I[2],l[P+3]=50;var B=O+4*k;l[B]=I[0],l[B+1]=I[1],l[B+2]=I[2],l[B+3]=50}}if(G)for(var X=0;X<N;X+=1)for(var Y=4*((M+X)*i+S),U=0;U<k;U+=1){var $=Y+4*U,F=4*(X*k+U);l[$]=R[F],l[$+1]=R[F+1],l[$+2]=R[F+2],l[$+3]=b&&w?200:l[$+3]?l[$+3]+10*e.cliqueLen:C+s*y,u[$]=e.colorKey[0],u[$+1]=e.colorKey[1],u[$+2]=e.colorKey[2],u[$+3]=255}if(d)for(var q=v[e.cliqueLen],K=-2;K<=N+1;K+=1){var W=4*((M+K)*i+S);if(-2===K||-1===K||K===N+1||K===N)for(var Z=-2;Z<k+2;Z+=1){var V=W+4*Z;l[V]=q[0],l[V+1]=q[1],l[V+2]=q[2],l[V+3]=200}else{var J=W-4;l[J]=q[0],l[J+1]=q[1],l[J+2]=q[2],l[J+3]=200;var Q=W-8;l[Q]=q[0],l[Q+1]=q[1],l[Q+2]=q[2],l[Q+3]=200;var tt=W+4*(k+1);l[tt]=q[0],l[tt+1]=q[1],l[tt+2]=q[2],l[tt+3]=200;var et=W+4*k;l[et]=q[0],l[et+1]=q[1],l[et+2]=q[2],l[et+3]=200}}var st=t.selectedCategory&&t.selectedLabel&&t.selectedLabel===e.labels[t.selectedCategory];if(st)for(var ot=t.ui.labels[t.selectedCategory].labels.find(function(e){return e.name===t.selectedLabel}),it=ot.color,nt=-2;nt<=N+1;nt+=1){var at=4*((M+nt)*i+S);if(-2===nt||-1===nt||nt===N+1||nt===N)for(var rt=-2;rt<k+2;rt+=1){var ct=at+4*rt;l[ct]=it[0],l[ct+1]=it[1],l[ct+2]=it[2],l[ct+3]=200}else{var lt=at-8;l[lt]=it[0],l[lt+1]=it[1],l[lt+2]=it[2],l[lt+3]=200;var ut=at-4;l[ut]=it[0],l[ut+1]=it[1],l[ut+2]=it[2],l[ut+3]=200;var ht=at+4*(k+1);l[ht]=it[0],l[ht+1]=it[1],l[ht+2]=it[2],l[ht+3]=200;var dt=at+4*k;l[dt]=it[0],l[dt+1]=it[1],l[dt+2]=it[2],l[dt+3]=200}}var gt=t.groupNeighbours[e.index];if(e.group||e.isNearly||gt&&!(gt>t.ui.neighboursThreshold)){var vt=gt?z:e.isNearly?D:e.group?I:null;if(vt)for(var pt=-2;pt<=N+1;pt+=1){var ft=4*((M+pt)*i+S);if(-2===pt||-1===pt||pt===N+1||pt===N)for(var mt=-2;mt<k+2;mt+=1){var bt=ft+4*mt;l[bt]=vt[0],l[bt+1]=vt[1],l[bt+2]=vt[2],l[bt+3]=200}else{var wt=ft-8;l[wt]=vt[0],l[wt+1]=vt[1],l[wt+2]=vt[2],l[wt+3]=200;var Ct=ft-4;l[Ct]=vt[0],l[Ct+1]=vt[1],l[Ct+2]=vt[2],l[Ct+3]=200;var xt=ft+4*(k+1);l[xt]=vt[0],l[xt+1]=vt[1],l[xt+2]=vt[2],l[xt+3]=200;var yt=ft+4*k;l[yt]=vt[0],l[yt+1]=vt[1],l[yt+2]=vt[2],l[yt+3]=200}}}}}),this.drawScissors)for(var k=this.scissorsStartX<this.scissorsEndX?this.scissorsStartX:this.scissorsEndX,N=this.scissorsStartY<this.scissorsEndY?this.scissorsStartY:this.scissorsEndY,S=Math.abs(this.scissorsEndX-this.scissorsStartX),M=Math.abs(this.scissorsEndY-this.scissorsStartY),G=[56,130,255],R=0;R<M;R+=1)for(var z=4*((N+R)*i+k),E=0;E<S;E+=1){var I=z+4*E;if(0===R||R===M-1)l[I]=G[0],l[I+1]=G[1],l[I+2]=G[2],l[I+3]=255;else if(0===E||E===S-1){var D=z;l[D]=G[0],l[D+1]=G[1],l[D+2]=G[2],l[D+3]=255;var T=z+4*(S-1);l[T]=G[0],l[T+1]=G[1],l[T+2]=G[2],l[T+3]=255}}var O=new ImageData(l,i,n),H=new ImageData(u,i,n),j=this.ui.toggle?this.ctx:this.hitCtx;this.ctx.resetTransform(),this.ctx.clearRect(0,0,this.width,this.height),this.ctx.putImageData(O,0,0),j.resetTransform(),j.clearRect(0,0,this.width,this.height),j.putImageData(H,0,0);var A=window.performance.now(),L=A-e;this.perfLogs.draw.push(L),L>this.maxDrawTime&&(this.maxDrawTime=L,console.warn("new max draw time"),console.warn(this.maxDrawTime)),this.valid=!0,this.ui.showHeatmap&&requestAnimationFrame(this.ui.drawHeatmap),this.ui.showNavHeatmap&&requestAnimationFrame(this.ui.drawNavHeatmapRect)}},{key:"zoom",value:function(t){t.hasOwnProperty("preventDefault")&&t.preventDefault(),t.hasOwnProperty("stopPropagation")&&t.stopPropagation();var e=this.scale,s=t.offsetX,o=t.offsetY;console.log({mouseX:s,mouseY:o});var i=(s-this.translateX)/e,n=(o-this.translateY)/e;t.deltaY<0&&(console.log("zoom in"),this.zoomStage+=1,this.changeScaleUp(),this.cluster*=this.clusterGrowth),t.deltaY>0&&(console.log("zoom out"),this.zoomStage-=1,this.changeScaleDown(),this.cluster/=this.clusterGrowth);var a=this.scale-e;return this.translateX-=i*a,this.translateY-=n*a,this.triggerDraw(),!1}},{key:"findNodeByMousePosition",value:function(t,e){var s=this.hitCtx.getImageData(t,e,1,1).data,o="rgb(".concat(s[0],",").concat(s[1],",").concat(s[2],")"),i=this.colorHash[o];return i>=0?this.nodes[i]:null}},{key:"handleMouseDown",value:function(t){t.preventDefault(),t.stopPropagation(),console.log("mousedown");var e=this.nodeUnderMouse;this.nodeOnMouseDown=e,this.startX=t.offsetX,this.startY=t.offsetY,e?this.draggNode=e:this.scissors?(console.log("Scissors"),this.drawScissors=!0,this.scissorsStartX=this.startX,this.scissorsStartY=this.startY,this.triggerDraw()):this.panning=!0}},{key:"handleMouseMove",value:function(t){var e=t.offsetX,s=t.offsetY;if(this.scissors)return this.scissorsEndX=e,this.scissorsEndY=s,this.triggerDraw();if(this.draggNode||this.panning){var o=e-this.startX,i=s-this.startY;if(this.startX=e,this.startY=s,this.panning)this.translateX+=o,this.translateY+=i;else if(this.draggNode){var n=o/this.scale,a=i/this.scale;if(this.draggNode.group){if(x()(this.nodes).forEach(function(t){t.group&&(t.x+=n,t.y+=a)}),this.ui.clusterMode){console.time("nodesInRange");var r=this.supercluster.trees[this.supercluster.trees.length-1],c=.2/this.scale,l=r.within(this.lngX(this.draggNode.x),this.latY(this.draggNode.y),c);x()(this.nodes).forEach(function(t){t.isNearly=!t.group&&l.includes(t.index)}),console.timeEnd("nodesInRange")}}else this.draggNode.x+=n,this.draggNode.y+=a}return this.triggerDraw()}var u=this.findNodeByMousePosition(e,s);return this.nodeUnderMouse=u,this.ui.activeNode=u,u&&!u.hasImage&&this.socket.emit("requestImage",{name:u.name,index:u.index}),null}},{key:"handleMouseUp",value:function(t){var e=this;console.log("mouseup");var s=this.nodeUnderMouse,o=t.ctrlKey;if(s&&s===this.nodeOnMouseDown)console.log("click on node:"),console.log(s),o&&(s.group?(s.group=!1,s.groupId=0):(s.group=!0,s.groupId=this.ui.activeGroup),this.updateGroupCounter()),this.ui.clickedNode=s,this.ui.neighbourMode&&this.groupNeighbours[s.index]&&(this.removedGroupNeighbours[s.index]=this.groupNeighbours[s.index],this.groupNeighbours[s.index]=void 0),this.draggNode&&(this.draggNode.group&&(x()(this.nodes).forEach(function(t){t.isNearly&&(t.group=!0,t.groupId=e.draggNode.groupId,t.isNearly=!1)}),this.updateGroupCounter()),this.draggNode=!1),this.createSuperCluster();else if(this.scissors){this.ui.cuttedNodes=[];var i=(this.scissorsStartX-this.translateX)/this.scale,n=(this.scissorsStartY-this.translateY)/this.scale,a=(this.scissorsEndX-this.translateX)/this.scale,r=(this.scissorsEndY-this.translateY)/this.scale;x()(this.nodes).forEach(function(t){(t.x>i&&t.x<a||t.x<i&&t.x>a)&&(t.y<n&&t.y>r||t.y>n&&t.y<r)&&(e.ui.cuttedNodes.push(t),t.group=!0,t.groupId=e.ui.activeGroup)}),this.updateGroupCounter(),this.scissors=!1,this.ui.scissors=!1,this.drawScissors=!1}this.panning=!1,this.triggerDraw()}},{key:"handleDoubleClick",value:function(t){if(console.log("Double click"),this.moveGroupToMouse){var e=(t.offsetX-this.translateX)/this.scale,s=(t.offsetY-this.translateY)/this.scale;this.moveGroupToPosition(e,s),this.createSuperCluster()}}},{key:"sizeRange",set:function(t){this._sizeRange=t<0?0:t},get:function(){return this._sizeRange}},{key:"scale",set:function(t){this._scale=t<20?20:Math.round(t),this.ui.scale=this.scale},get:function(){return this._scale}},{key:"zoomStage",set:function(t){t<0?this._zoomStage=0:t>this.maxZoomLvl?this._zoomStage=this.maxZoomLvl:this._zoomStage=t,this.ui.zoomStage=this._zoomStage},get:function(){return this._zoomStage}},{key:"scaleFaktor",set:function(t){this._scaleFaktor=t<0?0:t},get:function(){return this._scaleFaktor}},{key:"translateX",set:function(t){this._translateX=Math.round(t),this.ui.translateX=t},get:function(){return this._translateX}},{key:"translateY",set:function(t){this._translateY=Math.round(t),this.ui.translateY=t},get:function(){return this._translateY}},{key:"cluster",set:function(t){this._cluster=t<1?1:t,this.triggerDraw(),this.ui.cluster=this.cluster},get:function(){return this._cluster}},{key:"clusterRadius",set:function(t){this._clusterRadius=t<1?1:t},get:function(){return this._clusterRadius}},{key:"clusterTile",set:function(t){this._clusterTile=t<1?1:t},get:function(){return this._clusterTile}},{key:"scissors",set:function(t){this._scissors=t,this.explorer.style.cursor=t?"crosshair":"default"},get:function(){return this._scissors}},{key:"nodeUnderMouse",set:function(t){this._nodeUnderMouse=t,this.explorer.style.cursor=t?"grab":"default"},get:function(){return this._nodeUnderMouse}},{key:"moveGroupToMouse",set:function(t){this._moveGroupToMouse=t},get:function(){return this._moveGroupToMouse}},{key:"clusterGrowth",get:function(){return this._clusterGrowth},set:function(t){this._clusterGrowth=t<=1?1.01:t,this.ui.clusterGrowth=this.clusterGrowth}},{key:"valid",set:function(t){var e=this;!t&&this.valid&&window.requestAnimationFrame(function(){return e.draw2()}),this._valid=t},get:function(){return this._valid}}]),t}(),H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"area"},[s("div",{staticClass:"title"},[t._v("Neighbours")]),s("div",{staticClass:"btn between"},[t._v("\n        "+t._s(t.neighboursThreshold)+"\n        "),s("range-slider",{attrs:{value:t.neighboursThreshold,change:t.changeNeighboursThreshold}})],1),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:t.getGroupNeighbours}},[t._v("Update")]),s("div",{staticClass:"btn",on:{click:t.resetNeighbours}},[t._v("Reset")])])])},j=[],A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("input",{attrs:{type:"range",min:"0",max:"1",step:"0.01"},domProps:{value:t.value},on:{input:t.change}})},L=[],P={name:"range-slider",props:["value","change","input","slide"]},B=P,X=(s("2111"),Object(u["a"])(B,A,L,!1,null,"4f2e07eb",null));X.options.__file="RangeSlider.vue";var Y=X.exports,U={name:"Neighbours",props:["getStore","neighboursThreshold","changeNeighboursThreshold"],components:{RangeSlider:Y},data:function(){return{loading:!1,neighbours:[]}},mounted:function(){this.$nextTick(this.getGroupNeighbours)},beforeDestroy:function(){this.resetNeighbours()},methods:{getGroupNeighbours:function(){var t=Object(w["a"])(regeneratorRuntime.mark(function t(){var e,s,o,i,n,a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,e=this.getStore(),s={group:e.getGroupedNodeIds(),threshold:this.neighboursThreshold},o=e.groupNeighbours,i=e.removedGroupNeighbours,f()(o).length&&(s.neighbours=o,f()(i).length&&(s.removedNeighbours=i)),t.next=8,fetch("/api/v1/getGroupNeighbours",{method:"POST",headers:{"Content-type":"application/json"},body:b()(s)}).then(function(t){return t.json()}).catch(function(t){console.error(t)});case 8:n=t.sent,a=n.neighbours,r=n.group,e.updateGroupNeighbours(a),e.addNodesToActiveGroup(r),console.log({neighbours:a,group:r}),this.loading=!1,t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](0),this.loading=!1,console.error(t.t0);case 20:case"end":return t.stop()}},t,this,[[0,16]])}));function e(){return t.apply(this,arguments)}return e}(),resetNeighbours:function(){this.getStore().resetGroupNeighbours()}}},$=U,F=(s("1adc"),Object(u["a"])($,H,j,!1,null,"f74d7ca0",null));F.options.__file="Neighbours.vue";var q=F.exports,K=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("circle",{attrs:{cx:"6",cy:"6",r:"3"}}),s("circle",{attrs:{cx:"6",cy:"18",r:"3"}}),s("line",{attrs:{x1:"20",y1:"4",x2:"8.12",y2:"15.88"}}),s("line",{attrs:{x1:"14.47",y1:"14.48",x2:"20",y2:"20"}}),s("line",{attrs:{x1:"8.12",y1:"8.12",x2:"12",y2:"12"}})])},W=[],Z={name:"Scissors"},V=Z,J=(s("a279"),Object(u["a"])(V,K,W,!1,null,"c7a88150",null));J.options.__file="Scissors.vue";var Q=J.exports,tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("line",{attrs:{x1:"18",y1:"6",x2:"6",y2:"18"}}),s("line",{attrs:{x1:"6",y1:"6",x2:"18",y2:"18"}})])},et=[],st={name:"X"},ot=st,it=(s("6984"),Object(u["a"])(ot,tt,et,!1,null,"4820e78c",null));it.options.__file="X.vue";var nt=it.exports,at=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("polygon",{attrs:{points:"5 3 19 12 5 21 5 3"}})])},rt=[],ct={name:"Play"},lt=ct,ut=(s("0689"),Object(u["a"])(lt,at,rt,!1,null,"11e5a286",null));ut.options.__file="Play.vue";var ht=ut.exports,dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("line",{attrs:{x1:"22",y1:"2",x2:"11",y2:"13"}}),s("polygon",{attrs:{points:"22 2 15 22 11 13 2 9 22 2"}})])},gt=[],vt={name:"Send"},pt=vt,ft=(s("806f"),Object(u["a"])(pt,dt,gt,!1,null,"b4230f4e",null));ft.options.__file="Send.vue";var mt=ft.exports,bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("polygon",{attrs:{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"}}),s("line",{attrs:{x1:"8",y1:"2",x2:"8",y2:"18"}}),s("line",{attrs:{x1:"16",y1:"6",x2:"16",y2:"22"}})])},wt=[],Ct={name:"Map"},xt=Ct,yt=(s("9047"),Object(u["a"])(xt,bt,wt,!1,null,"2e122be7",null));yt.options.__file="Map.vue";var _t=yt.exports,kt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("circle",{attrs:{cx:"12",cy:"12",r:"10"}}),s("circle",{attrs:{cx:"12",cy:"12",r:"6"}}),s("circle",{attrs:{cx:"12",cy:"12",r:"2"}})])},Nt=[],St={name:"Target"},Mt=St,Gt=(s("9fd7"),Object(u["a"])(Mt,kt,Nt,!1,null,"f7ebc3f0",null));Gt.options.__file="Target.vue";var Rt=Gt.exports,zt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("polyline",{attrs:{points:"15 3 21 3 21 9"}}),s("polyline",{attrs:{points:"15 21 21 21 21 14"}}),s("polyline",{attrs:{points:"9 21 3 21 3 15"}}),s("polyline",{attrs:{points:"3 9 3 3 9 3"}}),s("line",{attrs:{x1:"21",y1:"3",x2:"14",y2:"10"}}),s("line",{attrs:{x1:"21",y1:"21",x2:"14",y2:"14"}}),s("line",{attrs:{x1:"3",y1:"21",x2:"10",y2:"14"}}),s("line",{attrs:{x1:"3",y1:"3",x2:"10",y2:"10"}})])},Et=[],It={name:"Mximize"},Dt=It,Tt=(s("9345"),Object(u["a"])(Dt,zt,Et,!1,null,"8cc79438",null));Tt.options.__file="Maximize.vue";var Ot=Tt.exports,Ht=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("polyline",{attrs:{points:"4 10 10 10 10 4"}}),s("polyline",{attrs:{points:"4 14 10 14 10 20"}}),s("polyline",{attrs:{points:"20 10 14 10 14 4"}}),s("polyline",{attrs:{points:"14 20 14 14 20 14"}}),s("line",{attrs:{x1:"3",y1:"3",x2:"10",y2:"10"}}),s("line",{attrs:{x1:"14",y1:"10",x2:"21",y2:"3"}}),s("line",{attrs:{x1:"3",y1:"21",x2:"10",y2:"14"}}),s("line",{attrs:{x1:"14",y1:"14",x2:"21",y2:"21"}})])},jt=[],At={name:"Minimize"},Lt=At,Pt=(s("0462"),Object(u["a"])(Lt,Ht,jt,!1,null,"1aee476c",null));Pt.options.__file="Minimize.vue";var Bt=Pt.exports,Xt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("rect",{attrs:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}}),s("circle",{attrs:{cx:"8.5",cy:"8.5",r:"1"}}),s("polyline",{attrs:{points:"21 15 15.5 10 9 15 6 12 3 14"}}),s("line",{attrs:{x1:"15.5",y1:"13.5",x2:"15.5",y2:"18.5"}}),s("line",{attrs:{x1:"13",y1:"16",x2:"18",y2:"16"}})])},Yt=[],Ut={name:"ImageSizeUp"},$t=Ut,Ft=(s("0261"),Object(u["a"])($t,Xt,Yt,!1,null,"1adb7fd8",null));Ft.options.__file="ImageSizeUp.vue";var qt=Ft.exports,Kt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("rect",{attrs:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}}),s("circle",{attrs:{cx:"8.5",cy:"8.5",r:"1"}}),s("polyline",{attrs:{points:"21 15 15.5 10 9 15 6 12 3 14"}}),s("line",{attrs:{x1:"13",y1:"16",x2:"18",y2:"16"}})])},Wt=[],Zt={name:"ImageSizeDown"},Vt=Zt,Jt=(s("1e27"),Object(u["a"])(Vt,Kt,Wt,!1,null,"2749e4a4",null));Jt.options.__file="ImageSizeDown.vue";var Qt=Jt.exports,te=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("line",{attrs:{x1:"12",y1:"5",x2:"12",y2:"19"}}),s("line",{attrs:{x1:"5",y1:"12",x2:"19",y2:"12"}})])},ee=[],se={name:"Plus"},oe=se,ie=(s("cce3"),Object(u["a"])(oe,te,ee,!1,null,"1ffb38f6",null));ie.options.__file="Plus.vue";var ne=ie.exports,ae=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("line",{attrs:{x1:"5",y1:"12",x2:"19",y2:"12"}})])},re=[],ce={name:"Minus"},le=ce,ue=(s("8a29"),Object(u["a"])(le,ae,re,!1,null,"7ee147c0",null));ue.options.__file="Minus.vue";var he=ue.exports,de=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"area"},[s("div",{staticClass:"row center"},[t._v("\n        performance monitor\n        "),s("div",{staticClass:"btn",on:{click:t.calcChartData}},[t._v("start")]),s("div",{staticClass:"btn",on:{click:t.resetChartData}},[t._v("reset")])]),s("trend",{attrs:{data:t.drawData,gradient:["#6fa8dc","#42b983","#2c3e50"],"auto-draw":""}}),t._v("\n    "+t._s(t.maxDrawTime())+"\n    "),s("trend",{attrs:{data:t.hitMapData,gradient:["#6fa8dc","#42b983","#2c3e50"],"auto-draw":""}}),t._v("\n    "+t._s(t.maxHitMapTime())+"\n")],1)},ge=[],ve=s("da19");o["a"].use(ve["a"]);var pe={name:"Logs",props:["getStore"],data:function(){return{drawData:[],hitMapData:[]}},computed:{},methods:{calcChartData:function(){var t=this.getStore();this.drawData=t.perfLogs.draw,this.hitMapData=t.perfLogs.hitmap},resetChartData:function(){console.log("reset");var t=this.getStore();t.perfLogs.draw=[],t.maxDrawTime=0,t.perfLogs.hitmap=[],t.maxHitMapTime=0,this.calcChartData()},maxDrawTime:function(){var t=this.getStore();return t?t.maxDrawTime:0},maxHitMapTime:function(){var t=this.getStore();return t?t.maxHitMapTime:0}}},fe=pe,me=(s("38d5"),Object(u["a"])(fe,de,ge,!1,null,"295f515d",null));me.options.__file="Logs.vue";var be=me.exports,we=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("polyline",{attrs:{points:"3 6 5 6 21 6"}}),s("path",{attrs:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}}),s("line",{attrs:{x1:"10",y1:"11",x2:"10",y2:"17"}}),s("line",{attrs:{x1:"14",y1:"11",x2:"14",y2:"17"}})])},Ce=[],xe={name:"Trash"},ye=xe,_e=(s("970a"),Object(u["a"])(ye,we,Ce,!1,null,"6232ea1e",null));_e.options.__file="Trash.vue";var ke=_e.exports,Ne=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("polyline",{attrs:{points:"17 1 21 5 17 9"}}),s("path",{attrs:{d:"M3 11V9a4 4 0 0 1 4-4h14"}}),s("polyline",{attrs:{points:"7 23 3 19 7 15"}}),s("path",{attrs:{d:"M21 13v2a4 4 0 0 1-4 4H3"}})])},Se=[],Me={name:"Repeat"},Ge=Me,Re=(s("d1df"),Object(u["a"])(Ge,Ne,Se,!1,null,"b8691d5e",null));Re.options.__file="Repeat.vue";var ze=Re.exports,Ee={store:null,name:"TsneMap",components:{Repeat:ze,Scissors:Q,X:nt,Play:ht,Send:mt,Navmap:_t,Target:Rt,Neighbours:q,Logs:be,"slider-picker":S["Slider"],Maximize:Ot,Minimize:Bt,"img-size-up":qt,"img-size-down":Qt,Plus:ne,Minus:he,Trash:ke},data:function(){return{items:[],socket:null,connectedToSocket:!1,loadingNodes:!1,nodesTotal:0,nodesRecived:0,scale:0,labels:[],selectedLabel:null,selectedCategory:null,showLabels:!1,clickedNode:null,labelColor:"#6057ff",showKLabels:!1,scissors:!1,target:!1,width:0,height:0,activeNode:null,cluster:5,clusterRadius:0,clusterTile:0,imgSize:0,representImgSize:0,neighbourImgSize:0,alphaBase:50,alphaIncrease:50,range:0,cuttedNodes:[],showOptions:!1,clusterGrowth:0,translateX:0,translateY:0,showHeatmap:!1,heatmapRadius:1,heatmapBlur:5,showNavHeatmap:!1,sizeRankedMode:!1,boarderRankedMode:!1,clusterMode:!1,oldClusterMode:!1,neighbourMode:!1,repsMode:0,gradient:[[50,250,0],[100,250,0],[150,250,0],[200,250,0],[255,250,0],[255,150,0],[255,150,0],[255,100,0],[255,50,0],[255,0,0]],toggle:!1,zoomStage:0,showGroups:!0,sorted:!1,sizeRange:0,showColorPicker:!1,colors:{hex:"#194d33",hsl:{h:150,s:.5,l:.2,a:1},hsv:{h:150,s:.66,v:.3,a:1},rgba:{r:25,g:77,b:51,a:1},a:1},selectedGradient:0,autoUpdateEmbedding:!1,socketId:"",dataset:"001",neighboursThreshold:.2,activeGroup:0,representWithAlpha:!1,savedGroups:[],groupName:"",groupCounter:0,groupColours:T}},methods:{getNode:function(t){return this.store.getNode(t)},getStore:function(){return this.store},sendData:function(){console.log("send data clicked"),console.log(this.store.nodes);var t=this.store.getNodes();console.log(t),this.loadingNodes=!0,this.socket.emit("updateNodes",{nodes:t})},changeActiveNode:function(t){return this.activeNode=t,null},clearGroup:function(){this.store.clearGroup(),this.activeGroup=null,this.neighbourMode=!1},setActiveGroup:function(t){this.activeGroup=t,this.store.triggerDraw()},changeNeighboursThreshold:function(t){var e=t.target;console.log("changeNeighboursThreshold"),console.log(e.v),this.neighboursThreshold=e.value,this.store.triggerDraw()},changeCluster:function(t){this.store.cluster+=t,this.cluster=this.store.cluster},changeClusterRadius:function(t){this.store.clusterRadius+=t,this.clusterRadius=this.store.clusterRadius},changeClusterTile:function(t){this.store.clusterTile+=t,this.clusterTile=this.store.clusterTile},sortNodes:function(){this.store.sortNodes(),this.sorted=this.store.sorted},drawHeatmap:function(){var t=this;console.time("drawHeatmap");var e=this.heatmap,s=x()(this.store.getNodes()).map(function(e){var s=(e.x*t.store.scale+t.store.translateX)/4,o=(e.y*t.store.scale+t.store.translateY)/4;return[s,o,1]});e.radius(this.heatmapRadius,this.heatmapBlur),e.data(s),e.draw(),requestAnimationFrame(function(){return console.timeEnd("drawHeatmap")})},drawNavHeatmap:function(){console.time("drawNavHeatmap");var t=this.navHeatmap,e=this.navHeatmapRect.width,s=this.navHeatmapRect.height,o=x()(this.store.getNodes()).map(function(t){var o=5*t.x+e/2,i=5*t.y+s/2;return[o,i,1]});t.radius(this.heatmapRadius,this.heatmapBlur),t.data(o),t.draw(),requestAnimationFrame(function(){return console.timeEnd("drawNavHeatmap")})},drawNavHeatmapRect:function(){console.time("drawNavHeatmapRect");var t=this.navHeatmapRect.getContext("2d"),e=20/this.store.scale,s=this.store.translateX/4,o=this.store.translateY/4,i=this.navHeatmapRect.width,n=this.navHeatmapRect.height,a=i/2-s*e,r=n/2-o*e;t.clearRect(0,0,this.navHeatmapRect.width,this.navHeatmapRect.height),t.strokeRect(a,r,i*e,n*e),requestAnimationFrame(function(){return console.timeEnd("drawNavHeatmapRect")})},toggleShowNavHeatmap:function(){this.showNavHeatmap=!this.showNavHeatmap,this.showNavHeatmap&&requestAnimationFrame(this.drawNavHeatmap),this.showNavHeatmap&&requestAnimationFrame(this.drawNavHeatmapRect)},toggleShowHeatmap:function(){this.showHeatmap=!this.showHeatmap,this.showHeatmap&&requestAnimationFrame(this.drawHeatmap)},toggleSizeRankedMode:function(){this.sizeRankedMode=!this.sizeRankedMode,this.store.triggerDraw()},toggleBoarderRankedMode:function(){this.boarderRankedMode=!this.boarderRankedMode,this.store.triggerDraw()},activateClusterMode:function(){this.clusterMode=!0,this.store.createSuperCluster()},toggleOldClusterMode:function(){this.oldClusterMode=!this.oldClusterMode,this.store.triggerDraw()},toggleNeighbourMode:function(){this.neighbourMode=!this.neighbourMode,this.store.triggerDraw()},changeImgSize:function(t){this.store.imgSize+=t,this.imgSize=this.store.imgSize,this.store.triggerDraw()},toggleShowOptions:function(){this.showOptions=!this.showOptions},changeClusterGrowth:function(t){this.store.clusterGrowth=Math.round(100*(this.store.clusterGrowth+t))/100},changeZoomStage:function(t){this.store.zoomStage+=t,this.store.triggerDraw()},changeScaleUp:function(){var t=document.getElementById("canvas");this.store.zoomStage-=1;var e={deltaY:-1,offsetX:Math.round(t.width/2),offsetY:Math.round(t.height/2)};this.store.zoom(e)},changeScaleDown:function(){var t=document.getElementById("canvas");this.store.zoomStage+=1;var e={deltaY:1,offsetX:Math.round(t.width/2),offsetY:Math.round(t.height/2)};this.store.zoom(e)},changeHeatmapRadius:function(t){this.heatmapRadius+=t,this.drawHeatmap(),this.drawNavHeatmap()},changeHeatmapBlur:function(t){this.heatmapBlur+=t,this.drawHeatmap(),this.drawNavHeatmap()},changeSizeRange:function(t){this.store.sizeRange+=t,this.sizeRange=this.store.sizeRange,this.store.triggerDraw()},selectTarget:function(){this.target=!this.target,this.store.moveGroupToMouse=this.target},selectScissors:function(){console.log("selectScissors"),this.scissors=!this.scissors,this.store.scissors=this.scissors},reset:function(){this.loadingNodes=!0,this.nodesRecived=0,this.nodesTotal=0},toggleRepresentWithAlpha:function(){this.representWithAlpha=!this.representWithAlpha,this.store.triggerDraw()},changeAlphaBase:function(t){this.alphaBase+=t,this.store.triggerDraw()},changeAlphaIncrease:function(t){this.alphaIncrease+=t,this.store.triggerDraw()},toogleRepsMode:function(){this.repsMode=(this.repsMode+1)%3,this.store.triggerDraw()},changeGradientColor:function(t){console.log("changeGradientColor"),this.selectedGradient=t,console.log(this.selectedGradient),this.colors.rgba.r=this.gradient[t][0],this.colors.rgba.g=this.gradient[t][1],this.colors.rgba.b=this.gradient[t][2],console.log(this.colors.rgba)},changeColor:function(t){console.log("changeColor"),console.log(t);var e=t.rgba;console.log(e),this.gradient.splice(this.selectedGradient,1,[e.r,e.g,e.b])},toggleUpdateEmbedding:function(){var t=Object(w["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.autoUpdateEmbedding=!this.autoUpdateEmbedding,!this.autoUpdateEmbedding){t.next=15;break}return console.log("startUpdateEmbedding"),console.log(this.socketId),t.prev=4,e=b()({nodes:this.store.getNodesSimple(),socketId:this.socketId}),t.next=8,fetch("/api/v1/startUpdateEmbedding",{method:"POST",headers:{"Content-type":"application/json"},body:e}).then(function(t){return t.text()});case 8:t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](4),console.error(t.t0);case 13:t.next=16;break;case 15:console.log("stopUpdateEmbedding");case 16:case"end":return t.stop()}},t,this,[[4,10]])}));function e(){return t.apply(this,arguments)}return e}(),handleChangeDataset:function(t){this.dataset=t},superCluster:function(){this.store.createSuperCluster()},changeRepresentImgSize:function(t){this.store.representImgSize+=t,this.representImgSize=this.store.representImgSize,this.store.triggerDraw()},changeNeighbourImgSize:function(t){this.store.neighbourImgSize+=t,this.neighbourImgSize=this.store.neighbourImgSize,this.store.triggerDraw()},saveGroup:function(){this.groupCounter+=1;var t=this.groupCounter,e=this.groupName||"Group ".concat(t);this.savedGroups.push({groupId:t,name:e,count:0,colorId:t%f()(this.groupColours).length}),this.activeGroup=t,this.store.saveGroup(t),this.store.triggerDraw()},selectGroup:function(t){var e=this.savedGroups[t].groupId;e===this.activeGroup?(this.setActiveGroup(null),this.store.clearGroup()):(console.log("select"),this.store.loadGroupByGroupId(e),this.setActiveGroup(e))},changeGroupColor:function(t,e){console.log("changeGroupColor",t.target.value,e),console.log(this.savedGroups[e]),this.savedGroups[e].colorId=t.target.value,console.log(this.savedGroups[e]),this.store.triggerDraw()},deleteGroup:function(t){var e=this.savedGroups[t].groupId;this.savedGroups.splice(t,1),this.store.deleteGroup(e)},handleNeighbourMode:function(t){var e=this.savedGroups[t].groupId;e!==this.activeGroup&&this.selectGroup(t),this.toggleNeighbourMode(),this.setActiveGroup(e)}},watch:{cluster:function(t){this.store.cluster=t},colors:function(t){console.log("watch color"),console.log(t),console.log(this.colors)},$route:function(){this.store.triggerDraw()}},mounted:function(){var t=this,e="localhost",s=_.a.connect("http://".concat(e,":3000"),{transports:["websocket"],reconnectionDelay:100,reconnectionDelayMax:1e3}),o=document.getElementById("canvas"),i=o.parentNode.clientWidth,n=o.parentNode.clientHeight;o.width=i,o.height=n;var a=document.createElement("canvas");a.width=i,a.height=n;var r=document.getElementById("heatmap");r.width=i/4,r.height=n/4,this.heatmap=N()(r);var c=document.getElementById("navHeatmap");c.width=i/4,c.height=n/4,this.navHeatmap=N()(c);var l=document.getElementById("navHeatmapRect");l.width=i/4,l.height=n/4,l.getContext("2d").strokeStyle="#3882ff",l.getContext("2d").lineWidth=1.5,this.navHeatmapRect=l;var u=new O(o,a,s,this);this.store=u,u.labelColor=this.labelColor,this.cluster=u.cluster,this.clusterRadius=u.clusterRadius,this.clusterTile=u.clusterTile,this.representImgSize=u.representImgSize,this.neighbourImgSize=u.neighbourImgSize,this.zoomStage=u.zoomStage,this.sizeRange=u.sizeRange,this.scale=u.scale,this.socket=s,s.on("connect",function(){t.connectedToSocket=!0,console.log("conected"),console.log("Socket id: ".concat(s.id)),console.log(s),t.socketId=s.id;var e=t.store.getNodes();console.log("nodes in store while connect (its maybe just a reconnect)"),console.log(e),f()(e).length||t.loadingNodes||(s.emit("getNodes",{nodes:{}}),t.reset())}),s.on("disconnect",function(e){t.connectedToSocket=!1,console.log("disconnect: ".concat(e)),console.log(s)}),s.on("node",function(e){e.index%100===0&&(console.log("receive node ".concat(e.index)),console.log(e)),0===t.nodesRecived&&console.time("loadAllNodes"),t.nodesRecived+=1,u.addNode(new G(e)),u.triggerDraw()}),s.on("receiveImage",function(t){var e=u.nodes[t.index];e.image.src="data:image/jpeg;base64,".concat(t.buffer),e.hasImage=!0}),s.on("totalNodesCount",function(e){console.log("totalNodesCount"),console.log(e),t.nodesTotal=e}),s.on("allNodesSend",function(){console.log("allNodesSend"),t.loadingNodes=!1,t.activateClusterMode(),console.timeEnd("loadAllNodes")}),s.on("updateLabels",function(e){console.log("updateLabels"),console.log(e),t.labels=e}),s.on("updateKdtree",function(t){console.log("updateKdtree"),console.log(t),u.kdtree=t}),s.on("updateEmbedding",function(e,s){console.log("updateEmbedding"),console.log(e),console.log(t.loadingNodes),t.loadingNodes=!1,console.log(t.loadingNodes),s({stopped:t.autoUpdateEmbedding}),t.store.updateNodes(e.nodes),t.store.createSuperCluster()}),s.on("connect_error",function(){console.log("connect_error")}),s.on("connect_timeout",function(){console.log("connect_timeout")}),s.on("reconnect",function(){console.log("reconnect")}),s.on("connecting",function(){console.log("connecting")}),s.on("reconnecting",function(){console.log("reconnecting")}),s.on("connect_failed",function(){console.log("connect_failed")}),s.on("reconnect_failed",function(){console.log("reconnect_failed")}),s.on("close",function(){console.log("close")})},beforeDestroy:function(){this.socket&&this.socket.disconnect()}},Ie=Ee,De=(s("a33d"),Object(u["a"])(Ie,g,v,!1,null,null,null));De.options.__file="TsneMap.vue";var Te=De.exports,Oe={name:"App",components:{NavHeader:d,TsneMap:Te}},He=Oe,je=(s("034f"),Object(u["a"])(He,i,n,!1,null,null,null));je.options.__file="App.vue";var Ae=je.exports,Le=s("8c4f"),Pe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div")},Be=[],Xe={name:"Welcome"},Ye=Xe,Ue=(s("ad12"),Object(u["a"])(Ye,Pe,Be,!1,null,"48a0ccb3",null));Ue.options.__file="Welcome.vue";var $e=Ue.exports,Fe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"areas"},[t.loading?s("div",{staticClass:"loading"},[s("div",{staticClass:"loading-wheel"})]):t._e(),s("div",{staticClass:"imgArea",class:{activePositiv:t.selectPositives},on:{click:function(e){t.toggleActive(!0)}}},t._l(t.positives,function(e,o){return s("div",{key:o,staticClass:"image",on:{mouseover:function(s){t.handleMouseOver(e)}}},[s("img",{attrs:{src:e.icon,alt:""},on:{click:function(e){t.switchPositivs(o)},contextmenu:function(e){e.preventDefault(),t.removePositives(o)}}})])}),0),s("div",{staticClass:"imgArea",class:{activeNegativ:!t.selectPositives},on:{click:function(e){t.toggleActive(!1)}}},t._l(t.negatives,function(e,o){return s("div",{key:o,staticClass:"image",on:{mouseover:function(s){t.handleMouseOver(e)}}},[s("img",{attrs:{src:e.icon,alt:""},on:{click:function(e){t.switchNegatives(o)},contextmenu:function(e){e.preventDefault(),t.removeNegatives(o)}}})])}),0),s("div",{staticClass:"imgArea"},t._l(t.topScored,function(t,e){return s("div",{key:e,staticClass:"image"},[s("img",{attrs:{src:t.icon,alt:""}})])}),0),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:t.trainSvm}},[t._v("train")]),s("div",{staticClass:"btn",on:{click:t.stopSvm}},[t._v("stop")]),s("div",{staticClass:"btn",on:{click:t.clearSvm}},[t._v("clear")])]),s("div",{staticClass:"btn",on:{click:t.clearSvm}},[t._v(t._s(t.count))])])},qe=[],Ke={name:"Svm",props:["node","nodes","getNode","changeActiveNode"],data:function(){return{positives:[],positivesAll:[],negatives:[],negativesAll:[],topScored:[],selectPositives:!0,loading:!1,count:0}},watch:{node:function(t){this.addNode(t)},nodes:function(t){var e=this;t&&t.forEach(function(t){return e.addNode(t)})}},methods:{addNode:function(t){t&&-1===this.positives.indexOf(t)&&-1===this.negatives.indexOf(t)&&(this.selectPositives?this.positives.push(t):this.negatives.push(t))},toggleActive:function(t){this.selectPositives=t},switchPositivs:function(t){this.negatives.push(this.positives[t]),this.positives.splice(t,1)},switchNegatives:function(t){this.positives.push(this.negatives[t]),this.negatives.splice(t,1)},removePositives:function(t){this.positives.splice(t,1)},removeNegatives:function(t){this.negatives.splice(t,1)},trainSvm:function(){var t=Object(w["a"])(regeneratorRuntime.mark(function t(){var e,s,o=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return console.log("trainSvm clicked"),this.loading=!0,this.positives.forEach(function(t){return-1===o.positivesAll.indexOf(t)&&o.positivesAll.push(t)}),this.negatives.forEach(function(t){return-1===o.negativesAll.indexOf(t)&&o.negativesAll.push(t)}),e=b()({p:this.positivesAll.map(function(t){return t.index}),n:this.negativesAll.map(function(t){return t.index}),count:this.count}),t.next=7,fetch("/api/v1/svm/train",{method:"POST",headers:{"Content-type":"application/json"},body:e}).then(function(t){return t.json()}).catch(function(t){o.loading=!1,console.error(t)});case 7:s=t.sent,console.log(s),this.count+=1,this.positives=[],s.p.forEach(function(t){var e=o.getNode(t);e?o.positives.push(e):console.log(new Error("der zurckgegebene Index in trainSvm ist nicht als Knoten vorhanden"))}),this.negatives=[],s.n.forEach(function(t){var e=o.getNode(t);e?o.negatives.push(e):console.log(new Error("der zurckgegebene Index in trainSvm ist nicht als Knoten vorhanden"))}),this.topScored=[],s.t.forEach(function(t){var e=o.getNode(t);e?o.topScored.push(e):console.log(new Error("der zurckgegebene Index in trainSvm ist nicht als Knoten vorhanden"))}),this.loading=!1,console.log("done");case 18:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),stopSvm:function(){var t=Object(w["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return console.log("stopSvm clicked"),this.loading=!0,t.next=4,fetch("/api/v1/svm/stop",{method:"POST",headers:{"Content-type":"application/json"}}).then(function(t){return t.json()}).catch(function(t){return console.error(t)});case 4:this.loading=!1;case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),clearSvm:function(){this.count=0,this.positives=[],this.positivesAll=[],this.negatives=[],this.negativesAll=[]},handleMouseOver:function(t){this.changeActiveNode(t)}}},We=Ke,Ze=(s("606a"),Object(u["a"])(We,Fe,qe,!1,null,"591d8202",null));Ze.options.__file="Svm.vue";var Ve=Ze.exports,Je=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"area"},[s("div",{staticClass:"title"},[t._v("categories")]),t._l(t.labels,function(e,o){return s("div",{key:o},[s("div",{staticClass:"option-title"},[t._v(t._s(e.name))]),t._l(e.labels,function(e,i){return s("div",{key:e.name,staticClass:"row"},[s("div",{staticClass:"btn",class:{active:t.selectedLabel===e.name},on:{click:function(s){t.toogleLabel(e.name,o)}}},[t._v("\n                "+t._s(e.name)+"\n            ")]),s("div",{staticClass:"btn",on:{click:function(s){s.stopPropagation(),t.addLabeledToGroup(e.name)}}},[s("grid")],1),s("div",{staticClass:"btn",class:{active:!e.show},on:{click:function(e){e.stopPropagation(),t.toogleShowLabel(i)}}},[s("slash")],1),s("div",{staticClass:"btn"},[s("input",{staticClass:"color-box",style:{backgroundColor:"rgb("+e.color[0]+","+e.color[1]+","+e.color[2]+")"},attrs:{type:"color"},domProps:{value:t.rgbToHex(e.color[0],e.color[1],e.color[2])},on:{change:function(e){e.preventDefault(),t.changeLabelColor(i,e)}}})])])})],2)}),s("div",{staticClass:"row wrap"},[t._l(t.labels,function(e,o){return s("div",{key:o,staticClass:"btn",class:{active:t.selectedCategory===o},on:{click:function(e){t.selectedCategory=o}}},[t._v("\n            "+t._s(e.name)+"\n        ")])}),s("div",{staticClass:"btn",on:{click:function(e){t.showAddCategory=!t.showAddCategory}}},[t._v("\n            +\n        ")])],2),t.showAddCategory?s("div",{staticClass:"row"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.category,expression:"category"}],attrs:{type:"text"},domProps:{value:t.category},on:{input:function(e){e.target.composing||(t.category=e.target.value)}}}),s("div",{staticClass:"btn",on:{click:t.addCategory}},[t._v("add")])]):t._e(),s("div",{staticClass:"imgArea"},t._l(t.selectedNodes,function(e,o){return s("div",{key:o,staticClass:"image"},[s("img",{attrs:{src:e.icon,alt:""},on:{click:function(e){t.removeNode(o)}}})])}),0),s("div",{staticClass:"row"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.label,expression:"label"}],attrs:{type:"text"},domProps:{value:t.label},on:{focus:t.handleFocus,blur:t.handleBlur,input:function(e){e.target.composing||(t.label=e.target.value)}}}),t.showLabelOptions?s("div",{staticClass:"dropdown",on:{mouseenter:function(e){t.mouseOver=!0},mouseleave:function(e){t.mouseOver=!1}}},t._l(t.labelsFiltered,function(e){return s("div",{key:e.name,staticClass:"item",on:{click:function(s){t.chooseLabel(e.name)}}},[t._v(t._s(e.name))])}),0):t._e(),s("div",{staticClass:"btn",on:{click:t.addLabel}},[t._v("add"),s("hash")],1),s("div",{staticClass:"btn",on:{click:t.clear}},[t._v("clear"),s("x")],1)]),s("div",{staticClass:"btn",on:{click:t.update}},[t._v("update labels")])],2)},Qe=[],ts=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("line",{attrs:{x1:"4",y1:"9",x2:"20",y2:"9"}}),s("line",{attrs:{x1:"4",y1:"15",x2:"20",y2:"15"}}),s("line",{attrs:{x1:"10",y1:"3",x2:"8",y2:"21"}}),s("line",{attrs:{x1:"16",y1:"3",x2:"14",y2:"21"}})])},es=[],ss={name:"Hash"},os=ss,is=(s("a17f"),Object(u["a"])(os,ts,es,!1,null,"4b8bdd8f",null));is.options.__file="Hash.vue";var ns=is.exports,as=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("circle",{attrs:{cx:"12",cy:"12",r:"10"}}),s("line",{attrs:{x1:"4.93",y1:"4.93",x2:"19.07",y2:"19.07"}})])},rs=[],cs={name:"Slash"},ls=cs,us=(s("018a"),Object(u["a"])(ls,as,rs,!1,null,"6c638dff",null));us.options.__file="Slash.vue";var hs=us.exports,ds=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("rect",{attrs:{x:"3",y:"3",width:"7",height:"7"}}),s("rect",{attrs:{x:"14",y:"3",width:"7",height:"7"}}),s("rect",{attrs:{x:"14",y:"14",width:"7",height:"7"}}),s("rect",{attrs:{x:"3",y:"14",width:"7",height:"7"}})])},gs=[],vs={name:"Grid"},ps=vs,fs=(s("7d9d"),Object(u["a"])(ps,ds,gs,!1,null,"597d5323",null));fs.options.__file="Grid.vue";var ms=fs.exports,bs=s("e814"),ws=s.n(bs);function Cs(t){return t=ws()(t,10),isNaN(t)?"00":(t=Math.max(0,Math.min(t,255)),"0123456789ABCDEF".charAt((t-t%16)/16)+"0123456789ABCDEF".charAt(t%16))}function xs(t,e,s){return"#".concat(Cs(t)).concat(Cs(e)).concat(Cs(s))}function ys(t){return"#"===t.charAt(0)?t.substring(1,7):t}function _s(t){return ws()(ys(t).substring(0,2),16)}function ks(t){return ws()(ys(t).substring(2,4),16)}function Ns(t){return ws()(ys(t).substring(4,6),16)}var Ss={name:"classifier",props:["nodes","node","labels","getStore"],components:{Hash:ns,X:nt,Slash:hs,Grid:ms},data:function(){return{label:"",showLabelOptions:!1,selectedNodes:[],mouseOver:!1,selectedCategory:"0",selectedLabel:"0",showAddCategory:!1,category:"",rgbToHex:xs}},watch:{node:function(t){this.addNode(t)},nodes:function(t){var e=this;t&&t.forEach(function(t){return e.addNode(t)})}},methods:{addNode:function(t){t&&-1===this.selectedNodes.indexOf(t)&&this.selectedNodes.push(t)},removeNode:function(t){this.selectedNodes.splice(t,1)},addCategory:function(){console.log("addLabel clicked"),console.log(this.category);var t=f()(this.labels).length;this.labels[t]={name:this.category,labels:[]},this.category="",this.showAddCategory=!1},addLabel:function(){var t=this;console.log("addLabel clicked"),console.log(this.label),this.labels[this.selectedCategory].labels.some(function(e){return e.name===t.label})||this.labels[this.selectedCategory].labels.push({name:this.label,show:!0}),this.selectedNodes.forEach(function(e){e.labels[t.selectedCategory]=t.label}),this.label="",this.showLabelOptions=!1,this.getStore().triggerDraw()},handleFocus:function(){console.log("input focus"),this.showLabelOptions=!0},handleBlur:function(){console.log("input blur"),this.mouseOver||(this.showLabelOptions=!1)},chooseLabel:function(t){console.log("chooselabel"),this.label=t,this.showLabelOptions=!1},update:function(){var t=Object(w["a"])(regeneratorRuntime.mark(function t(){var e,s,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return console.log("update"),e=this.getStore().getNodes(),s=b()({nodes:e}),t.next=5,fetch("/api/v1/updateLabels",{method:"POST",headers:{"Content-type":"application/json"},body:s}).then(function(t){return t.text()}).catch(function(t){console.error(t)});case 5:o=t.sent,console.log(o);case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),clear:function(){this.selectedNodes=[]},changeLabelColor:function(t,e){console.log("changeLabelColor"),this.labels[this.selectedCategory].labels[t].color[0]=_s(e.target.value),this.labels[this.selectedCategory].labels[t].color[1]=ks(e.target.value),this.labels[this.selectedCategory].labels[t].color[2]=Ns(e.target.value),this.store.triggerDraw()},toogleLabel:function(t,e){this.selectedLabel=this.selectedLabel===t?null:t,this.getStore().selectedLabel=this.selectedLabel,this.getStore().selectedCategory=e,this.getStore().triggerDraw()},addLabeledToGroup:function(t){this.store.addLabeledToGroup(t)},toogleShowLabel:function(t){this.labels[this.selectedCategory].labels[t].show=!this.labels[this.selectedCategory].labels[t].show,this.store.triggerDraw()}},computed:{labelsFiltered:function(){var t=this;return this.labels[this.selectedCategory].labels.filter(function(e){return e.name.includes(t.label)})}}},Ms=Ss,Gs=(s("11a5"),Object(u["a"])(Ms,Je,Qe,!1,null,"07ec7ae9",null));Gs.options.__file="Classifier.vue";var Rs=Gs.exports,zs="classifier",Es="svm";o["a"].use(Le["a"]);var Is=new Le["a"]({routes:[{path:"/",name:"Welcome",component:$e},{path:"/".concat(zs),name:zs,component:Rs,props:!0},{path:"/".concat(Es),name:Es,component:Ve,props:!0}]});s("a766");o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(Ae)},router:Is}).$mount("#app")},"5d67":function(t,e,s){},"5f81":function(t,e,s){},"606a":function(t,e,s){"use strict";var o=s("3804"),i=s.n(o);i.a},"64a9":function(t,e,s){},6984:function(t,e,s){"use strict";var o=s("c075"),i=s.n(o);i.a},"6d0b":function(t,e,s){},"7d9d":function(t,e,s){"use strict";var o=s("83b3"),i=s.n(o);i.a},"806f":function(t,e,s){"use strict";var o=s("a60c"),i=s.n(o);i.a},"83b3":function(t,e,s){},8543:function(t,e,s){"use strict";var o=s("6d0b"),i=s.n(o);i.a},8861:function(t,e,s){},"8a29":function(t,e,s){"use strict";var o=s("8861"),i=s.n(o);i.a},"8f48":function(t,e,s){},9047:function(t,e,s){"use strict";var o=s("aee9"),i=s.n(o);i.a},9345:function(t,e,s){"use strict";var o=s("9cce"),i=s.n(o);i.a},"970a":function(t,e,s){"use strict";var o=s("0ca9"),i=s.n(o);i.a},9799:function(t,e,s){},"9cce":function(t,e,s){},"9fd7":function(t,e,s){"use strict";var o=s("9799"),i=s.n(o);i.a},a17f:function(t,e,s){"use strict";var o=s("b752"),i=s.n(o);i.a},a279:function(t,e,s){"use strict";var o=s("5d67"),i=s.n(o);i.a},a33d:function(t,e,s){"use strict";var o=s("369a"),i=s.n(o);i.a},a60c:function(t,e,s){},a63e:function(t,e,s){},a766:function(t,e,s){},ad12:function(t,e,s){"use strict";var o=s("8f48"),i=s.n(o);i.a},aee9:function(t,e,s){},b02a:function(t,e,s){},b752:function(t,e,s){},c075:function(t,e,s){},c077:function(t,e,s){},cb9e:function(t,e,s){},cce3:function(t,e,s){"use strict";var o=s("5f81"),i=s.n(o);i.a},d1df:function(t,e,s){"use strict";var o=s("cb9e"),i=s.n(o);i.a},f58d:function(t,e,s){},feac:function(t,e,s){}});
//# sourceMappingURL=app.e7801e72.js.map